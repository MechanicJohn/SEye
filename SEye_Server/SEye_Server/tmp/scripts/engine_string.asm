; Listing generated by Microsoft (R) Optimizing Compiler Version 15.00.30729.01 

	TITLE	c:\Users\Admin\Desktop\Projects\SEye_Server\engine_string.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB OLDNAMES

PUBLIC	??BStringClass@@QAEPBDXZ			; StringClass::operator char const *
PUBLIC	?Get_Buffer@StringClass@@QAEPADH@Z		; StringClass::Get_Buffer
PUBLIC	?Store_Allocated_Length@StringClass@@QAEXH@Z	; StringClass::Store_Allocated_Length
PUBLIC	?Set_Buffer_And_Allocated_Length@StringClass@@QAEXPADH@Z ; StringClass::Set_Buffer_And_Allocated_Length
PUBLIC	?Get_Allocated_Length@StringClass@@QAEHXZ	; StringClass::Get_Allocated_Length
PUBLIC	?Allocate_Buffer@StringClass@@QAEPADH@Z		; StringClass::Allocate_Buffer
PUBLIC	?Get_Header@StringClass@@QAEPAU_HEADER@1@XZ	; StringClass::Get_Header
PUBLIC	?Is_Empty@StringClass@@QAE_NXZ			; StringClass::Is_Empty
PUBLIC	?Get_Buffer@WideStringClass@@QAEPA_WH@Z		; WideStringClass::Get_Buffer
PUBLIC	?Store_Allocated_Length@WideStringClass@@QAEXH@Z ; WideStringClass::Store_Allocated_Length
PUBLIC	?Set_Buffer_And_Allocated_Length@WideStringClass@@QAEXPA_WH@Z ; WideStringClass::Set_Buffer_And_Allocated_Length
PUBLIC	?Get_Allocated_Length@WideStringClass@@QAEHXZ	; WideStringClass::Get_Allocated_Length
PUBLIC	?Allocate_Buffer@WideStringClass@@QAEPA_WH@Z	; WideStringClass::Allocate_Buffer
PUBLIC	?Unlock@CriticalSectionClass@@QAEXXZ		; CriticalSectionClass::Unlock
PUBLIC	?Get_Header@WideStringClass@@QAEPAU_HEADER@1@XZ	; WideStringClass::Get_Header
PUBLIC	?Is_Empty@WideStringClass@@QAE_NXZ		; WideStringClass::Is_Empty
PUBLIC	?m_UsedTempStringCount@WideStringClass@@2PAHA	; WideStringClass::m_UsedTempStringCount
PUBLIC	?ReservedMask@StringClass@@2PAIA		; StringClass::ReservedMask
PUBLIC	?m_EmptyString@StringClass@@2PAPADA		; StringClass::m_EmptyString
PUBLIC	?m_EmptyString@WideStringClass@@2PAPA_WA	; WideStringClass::m_EmptyString
PUBLIC	?m_ResTempPtr@WideStringClass@@2PAPA_WA		; WideStringClass::m_ResTempPtr
PUBLIC	?m_NullChar@StringClass@@2PADA			; StringClass::m_NullChar
PUBLIC	?m_NullChar@WideStringClass@@2PA_WA		; WideStringClass::m_NullChar
PUBLIC	?m_TempStrings@StringClass@@2PADA		; StringClass::m_TempStrings
PUBLIC	?m_Mutex@StringClass@@2PAVCriticalSectionClass@@A ; StringClass::m_Mutex
PUBLIC	?m_FreeTempPtr@WideStringClass@@2PAPA_WA	; WideStringClass::m_FreeTempPtr
PUBLIC	?m_TempMutex@WideStringClass@@2PAVCriticalSectionClass@@A ; WideStringClass::m_TempMutex
EXTRN	_wcsrtombs:PROC
EXTRN	__vswprintf_c_l:PROC
EXTRN	_mbsrtowcs:PROC
EXTRN	_mbstowcs:PROC
?m_UsedTempStringCount@WideStringClass@@2PAHA DD 01H DUP (?) ; WideStringClass::m_UsedTempStringCount
?ReservedMask@StringClass@@2PAIA DD 01H DUP (?)		; StringClass::ReservedMask
?m_EmptyString@StringClass@@2PAPADA DD 01H DUP (?)	; StringClass::m_EmptyString
?m_EmptyString@WideStringClass@@2PAPA_WA DD 01H DUP (?)	; WideStringClass::m_EmptyString
?m_ResTempPtr@WideStringClass@@2PAPA_WA DD 01H DUP (?)	; WideStringClass::m_ResTempPtr
?m_NullChar@StringClass@@2PADA DD 01H DUP (?)		; StringClass::m_NullChar
?m_NullChar@WideStringClass@@2PA_WA DD 01H DUP (?)	; WideStringClass::m_NullChar
?m_TempStrings@StringClass@@2PADA DD 01H DUP (?)	; StringClass::m_TempStrings
?m_Mutex@StringClass@@2PAVCriticalSectionClass@@A DD 01H DUP (?) ; StringClass::m_Mutex
?m_FreeTempPtr@WideStringClass@@2PAPA_WA DD 01H DUP (?)	; WideStringClass::m_FreeTempPtr
?m_TempMutex@WideStringClass@@2PAVCriticalSectionClass@@A DD 01H DUP (?) ; WideStringClass::m_TempMutex
PUBLIC	?InitEngineString@@YAXI@Z			; InitEngineString
; Function compile flags: /Ogtpy
; File c:\users\admin\desktop\projects\seye_server\engine_string.cpp
;	COMDAT ?InitEngineString@@YAXI@Z
_TEXT	SEGMENT
?InitEngineString@@YAXI@Z PROC				; InitEngineString, COMDAT

; 32   : {

	mov	eax, DWORD PTR ?Exe@@3HA		; Exe

; 33   : 	switch(exe)

	cmp	eax, 3
	ja	$LN1@InitEngine@3
	jmp	DWORD PTR $LN10@InitEngine@3[eax*4]
$LN5@InitEngine@3:

; 34   : 	{
; 35   : 		case 0: //game.exe
; 36   : 			StringClass::m_Mutex =						(CriticalSectionClass *)0x0083DC08;

	mov	DWORD PTR ?m_Mutex@StringClass@@2PAVCriticalSectionClass@@A, 8641544 ; StringClass::m_Mutex, 0083dc08H

; 37   : 			StringClass::ReservedMask =					(unsigned int *)0x0083EC10;

	mov	DWORD PTR ?ReservedMask@StringClass@@2PAIA, 8645648 ; StringClass::ReservedMask, 0083ec10H

; 38   : 			StringClass::m_TempStrings =				(char *)0x0083DC0C;

	mov	DWORD PTR ?m_TempStrings@StringClass@@2PADA, 8641548 ; StringClass::m_TempStrings, 0083dc0cH

; 39   : 			StringClass::m_EmptyString =				(char **)0x00809D38;

	mov	DWORD PTR ?m_EmptyString@StringClass@@2PAPADA, 8428856 ; StringClass::m_EmptyString, 00809d38H

; 40   : 			StringClass::m_NullChar =					(char *)0x0083EC0C;

	mov	DWORD PTR ?m_NullChar@StringClass@@2PADA, 8645644 ; StringClass::m_NullChar, 0083ec0cH

; 41   : 			WideStringClass::m_FreeTempPtr =			(wchar_t **)0x00809D40;

	mov	DWORD PTR ?m_FreeTempPtr@WideStringClass@@2PAPA_WA, 8428864 ; WideStringClass::m_FreeTempPtr, 00809d40H

; 42   : 			WideStringClass::m_ResTempPtr =				(wchar_t **)0x0083F440;

	mov	DWORD PTR ?m_ResTempPtr@WideStringClass@@2PAPA_WA, 8647744 ; WideStringClass::m_ResTempPtr, 0083f440H

; 43   : 			WideStringClass::m_EmptyString =			(wchar_t **)0x00809D3C;

	mov	DWORD PTR ?m_EmptyString@WideStringClass@@2PAPA_WA, 8428860 ; WideStringClass::m_EmptyString, 00809d3cH

; 44   : 			WideStringClass::m_NullChar =				(wchar_t *)0x0083F43C;

	mov	DWORD PTR ?m_NullChar@WideStringClass@@2PA_WA, 8647740 ; WideStringClass::m_NullChar, 0083f43cH

; 45   : 			WideStringClass::m_UsedTempStringCount =	(int *)0x0083F438;

	mov	DWORD PTR ?m_UsedTempStringCount@WideStringClass@@2PAHA, 8647736 ; WideStringClass::m_UsedTempStringCount, 0083f438H

; 46   : 			WideStringClass::m_TempMutex =				(CriticalSectionClass *)0x0083F024;

	mov	DWORD PTR ?m_TempMutex@WideStringClass@@2PAVCriticalSectionClass@@A, 8646692 ; WideStringClass::m_TempMutex, 0083f024H

; 99   : 			break;
; 100  : 	}
; 101  : }

	ret	0
$LN4@InitEngine@3:

; 47   : 			break;
; 48   : 		case 1: //server.dat
; 49   : 			StringClass::m_Mutex =						(CriticalSectionClass *)0x0083CDF0;

	mov	DWORD PTR ?m_Mutex@StringClass@@2PAVCriticalSectionClass@@A, 8637936 ; StringClass::m_Mutex, 0083cdf0H

; 50   : 			StringClass::ReservedMask =					(unsigned int *)0x0083DDF8;

	mov	DWORD PTR ?ReservedMask@StringClass@@2PAIA, 8642040 ; StringClass::ReservedMask, 0083ddf8H

; 51   : 			StringClass::m_TempStrings =				(char *)0x0083CDF4;

	mov	DWORD PTR ?m_TempStrings@StringClass@@2PADA, 8637940 ; StringClass::m_TempStrings, 0083cdf4H

; 52   : 			StringClass::m_EmptyString =				(char **)0x00808F10;

	mov	DWORD PTR ?m_EmptyString@StringClass@@2PAPADA, 8425232 ; StringClass::m_EmptyString, 00808f10H

; 53   : 			StringClass::m_NullChar =					(char *)0x0083DDF4;

	mov	DWORD PTR ?m_NullChar@StringClass@@2PADA, 8642036 ; StringClass::m_NullChar, 0083ddf4H

; 54   : 			WideStringClass::m_FreeTempPtr =			(wchar_t **)0x00808F18;

	mov	DWORD PTR ?m_FreeTempPtr@WideStringClass@@2PAPA_WA, 8425240 ; WideStringClass::m_FreeTempPtr, 00808f18H

; 55   : 			WideStringClass::m_ResTempPtr =				(wchar_t **)0x0083E628;

	mov	DWORD PTR ?m_ResTempPtr@WideStringClass@@2PAPA_WA, 8644136 ; WideStringClass::m_ResTempPtr, 0083e628H

; 56   : 			WideStringClass::m_EmptyString =			(wchar_t **)0x00808F14;

	mov	DWORD PTR ?m_EmptyString@WideStringClass@@2PAPA_WA, 8425236 ; WideStringClass::m_EmptyString, 00808f14H

; 57   : 			WideStringClass::m_NullChar =				(wchar_t *)0x0083E624;

	mov	DWORD PTR ?m_NullChar@WideStringClass@@2PA_WA, 8644132 ; WideStringClass::m_NullChar, 0083e624H

; 58   : 			WideStringClass::m_UsedTempStringCount =	(int *)0x0083E620;

	mov	DWORD PTR ?m_UsedTempStringCount@WideStringClass@@2PAHA, 8644128 ; WideStringClass::m_UsedTempStringCount, 0083e620H

; 59   : 			WideStringClass::m_TempMutex =				(CriticalSectionClass *)0x0083E20C;

	mov	DWORD PTR ?m_TempMutex@WideStringClass@@2PAVCriticalSectionClass@@A, 8643084 ; WideStringClass::m_TempMutex, 0083e20cH

; 99   : 			break;
; 100  : 	}
; 101  : }

	ret	0
$LN3@InitEngine@3:

; 60   : 			break;
; 61   : 		case 2: //RH73
; 62   : 			StringClass::m_Mutex =						(CriticalSectionClass *)0x08BB5FDC;

	mov	DWORD PTR ?m_Mutex@StringClass@@2PAVCriticalSectionClass@@A, 146497500 ; StringClass::m_Mutex, 08bb5fdcH

; 63   : 			StringClass::ReservedMask =					(unsigned int *)0x086E8410;

	mov	DWORD PTR ?ReservedMask@StringClass@@2PAIA, 141460496 ; StringClass::ReservedMask, 086e8410H

; 64   : 			StringClass::m_TempStrings =				(char *)0x08BE8CE0;

	mov	DWORD PTR ?m_TempStrings@StringClass@@2PADA, 146705632 ; StringClass::m_TempStrings, 08be8ce0H

; 65   : 			StringClass::m_EmptyString =				(char **)0x086E840C;

	mov	DWORD PTR ?m_EmptyString@StringClass@@2PAPADA, 141460492 ; StringClass::m_EmptyString, 086e840cH

; 66   : 			StringClass::m_NullChar =					(char *)0x086E8408;

	mov	DWORD PTR ?m_NullChar@StringClass@@2PADA, 141460488 ; StringClass::m_NullChar, 086e8408H

; 67   : 			WideStringClass::m_FreeTempPtr =			(wchar_t **)0x086E83E4;

	mov	DWORD PTR ?m_FreeTempPtr@WideStringClass@@2PAPA_WA, 141460452 ; WideStringClass::m_FreeTempPtr, 086e83e4H

; 68   : 			WideStringClass::m_ResTempPtr =				(wchar_t **)0x086E83F4;

	mov	DWORD PTR ?m_ResTempPtr@WideStringClass@@2PAPA_WA, 141460468 ; WideStringClass::m_ResTempPtr, 086e83f4H

; 69   : 			WideStringClass::m_EmptyString =			(wchar_t **)0x086E83E0;

	mov	DWORD PTR ?m_EmptyString@WideStringClass@@2PAPA_WA, 141460448 ; WideStringClass::m_EmptyString, 086e83e0H

; 70   : 			WideStringClass::m_NullChar =				(wchar_t *)0x086E83DC;

	mov	DWORD PTR ?m_NullChar@WideStringClass@@2PA_WA, 141460444 ; WideStringClass::m_NullChar, 086e83dcH

; 71   : 			WideStringClass::m_UsedTempStringCount =	(int *)0x086E83D8;

	mov	DWORD PTR ?m_UsedTempStringCount@WideStringClass@@2PAHA, 141460440 ; WideStringClass::m_UsedTempStringCount, 086e83d8H

; 72   : 			WideStringClass::m_TempMutex =				(CriticalSectionClass *)0x08BB5FD4;

	mov	DWORD PTR ?m_TempMutex@WideStringClass@@2PAVCriticalSectionClass@@A, 146497492 ; WideStringClass::m_TempMutex, 08bb5fd4H

; 99   : 			break;
; 100  : 	}
; 101  : }

	ret	0
$LN2@InitEngine@3:

; 73   : 			break;
; 74   : 		case 3: //RH8
; 75   : 			StringClass::m_Mutex =						(CriticalSectionClass *)0x089D0CC0;

	mov	DWORD PTR ?m_Mutex@StringClass@@2PAVCriticalSectionClass@@A, 144510144 ; StringClass::m_Mutex, 089d0cc0H

; 76   : 			StringClass::ReservedMask =					(unsigned int *)0x08610F84;

	mov	DWORD PTR ?ReservedMask@StringClass@@2PAIA, 140578692 ; StringClass::ReservedMask, 08610f84H

; 77   : 			StringClass::m_TempStrings =				(char *)0x089D0CE0;

	mov	DWORD PTR ?m_TempStrings@StringClass@@2PADA, 144510176 ; StringClass::m_TempStrings, 089d0ce0H

; 78   : 			StringClass::m_EmptyString =				(char **)0x08610F80;

	mov	DWORD PTR ?m_EmptyString@StringClass@@2PAPADA, 140578688 ; StringClass::m_EmptyString, 08610f80H

; 79   : 			StringClass::m_NullChar =					(char *)0x08610F7C;

	mov	DWORD PTR ?m_NullChar@StringClass@@2PADA, 140578684 ; StringClass::m_NullChar, 08610f7cH

; 80   : 			WideStringClass::m_FreeTempPtr =			(wchar_t **)0x08610F58;

	mov	DWORD PTR ?m_FreeTempPtr@WideStringClass@@2PAPA_WA, 140578648 ; WideStringClass::m_FreeTempPtr, 08610f58H

; 81   : 			WideStringClass::m_ResTempPtr =				(wchar_t **)0x08610F68;

	mov	DWORD PTR ?m_ResTempPtr@WideStringClass@@2PAPA_WA, 140578664 ; WideStringClass::m_ResTempPtr, 08610f68H

; 82   : 			WideStringClass::m_EmptyString =			(wchar_t **)0x08610F54;

	mov	DWORD PTR ?m_EmptyString@WideStringClass@@2PAPA_WA, 140578644 ; WideStringClass::m_EmptyString, 08610f54H

; 83   : 			WideStringClass::m_NullChar =				(wchar_t *)0x08610F50;

	mov	DWORD PTR ?m_NullChar@WideStringClass@@2PA_WA, 140578640 ; WideStringClass::m_NullChar, 08610f50H

; 84   : 			WideStringClass::m_UsedTempStringCount =	(int *)0x08610F4C;

	mov	DWORD PTR ?m_UsedTempStringCount@WideStringClass@@2PAHA, 140578636 ; WideStringClass::m_UsedTempStringCount, 08610f4cH

; 85   : 			WideStringClass::m_TempMutex =				(CriticalSectionClass *)0x089CFC20;

	mov	DWORD PTR ?m_TempMutex@WideStringClass@@2PAVCriticalSectionClass@@A, 144505888 ; WideStringClass::m_TempMutex, 089cfc20H

; 99   : 			break;
; 100  : 	}
; 101  : }

	ret	0
$LN1@InitEngine@3:

; 86   : 			break;
; 87   : 		default:
; 88   : 			StringClass::m_Mutex =						(CriticalSectionClass *)0;

	xor	eax, eax
	mov	DWORD PTR ?m_Mutex@StringClass@@2PAVCriticalSectionClass@@A, eax ; StringClass::m_Mutex

; 89   : 			StringClass::ReservedMask =					(unsigned int *)0;

	mov	DWORD PTR ?ReservedMask@StringClass@@2PAIA, eax ; StringClass::ReservedMask

; 90   : 			StringClass::m_TempStrings =				(char *)0;

	mov	DWORD PTR ?m_TempStrings@StringClass@@2PADA, eax ; StringClass::m_TempStrings

; 91   : 			StringClass::m_EmptyString =				(char **)0;

	mov	DWORD PTR ?m_EmptyString@StringClass@@2PAPADA, eax ; StringClass::m_EmptyString

; 92   : 			StringClass::m_NullChar =					(char *)0;

	mov	DWORD PTR ?m_NullChar@StringClass@@2PADA, eax ; StringClass::m_NullChar

; 93   : 			WideStringClass::m_FreeTempPtr =			(wchar_t **)0;

	mov	DWORD PTR ?m_FreeTempPtr@WideStringClass@@2PAPA_WA, eax ; WideStringClass::m_FreeTempPtr

; 94   : 			WideStringClass::m_ResTempPtr =				(wchar_t **)0;

	mov	DWORD PTR ?m_ResTempPtr@WideStringClass@@2PAPA_WA, eax ; WideStringClass::m_ResTempPtr

; 95   : 			WideStringClass::m_EmptyString =			(wchar_t **)0;

	mov	DWORD PTR ?m_EmptyString@WideStringClass@@2PAPA_WA, eax ; WideStringClass::m_EmptyString

; 96   : 			WideStringClass::m_NullChar =				(wchar_t *)0;

	mov	DWORD PTR ?m_NullChar@WideStringClass@@2PA_WA, eax ; WideStringClass::m_NullChar

; 97   : 			WideStringClass::m_UsedTempStringCount =	(int *)0;

	mov	DWORD PTR ?m_UsedTempStringCount@WideStringClass@@2PAHA, eax ; WideStringClass::m_UsedTempStringCount

; 98   : 			WideStringClass::m_TempMutex =				(CriticalSectionClass *)0;

	mov	DWORD PTR ?m_TempMutex@WideStringClass@@2PAVCriticalSectionClass@@A, eax ; WideStringClass::m_TempMutex

; 99   : 			break;
; 100  : 	}
; 101  : }

	ret	0
	npad	1
$LN10@InitEngine@3:
	DD	$LN5@InitEngine@3
	DD	$LN4@InitEngine@3
	DD	$LN3@InitEngine@3
	DD	$LN2@InitEngine@3
?InitEngineString@@YAXI@Z ENDP				; InitEngineString
PUBLIC	?newstr@@YAPADPBD@Z				; newstr
EXTRN	_memcpy:PROC
; Function compile flags: /Ogtpy
;	COMDAT ?newstr@@YAPADPBD@Z
_TEXT	SEGMENT
_str$ = 8						; size = 4
?newstr@@YAPADPBD@Z PROC				; newstr, COMDAT

; 581  : {

	push	ebx
	mov	ebx, DWORD PTR _str$[esp]
	push	esi

; 582  : 	unsigned long len = strlen(str)+1;

	mov	eax, ebx
	push	edi
	lea	edx, DWORD PTR [eax+1]
	npad	4
$LL6@newstr:
	mov	cl, BYTE PTR [eax]
	inc	eax
	test	cl, cl
	jne	SHORT $LL6@newstr
	sub	eax, edx

; 583  : 	char *s = new char[len];

	cmp	DWORD PTR ?RenNew@@3P6APAXK@ZA, 0	; RenNew
	lea	esi, DWORD PTR [eax+1]
	jne	SHORT $LN3@newstr
	call	?InitEngine@@YAXXZ			; InitEngine
$LN3@newstr:
	push	esi
	call	DWORD PTR ?RenNew@@3P6APAXK@ZA		; RenNew

; 584  : 	memcpy(s,str,len);

	push	esi
	mov	edi, eax
	push	ebx
	push	edi
	call	_memcpy
	add	esp, 16					; 00000010H

; 585  : 	return s;	

	mov	eax, edi
	pop	edi
	pop	esi
	pop	ebx

; 586  : };

	ret	0
?newstr@@YAPADPBD@Z ENDP				; newstr
_TEXT	ENDS
PUBLIC	?WideCharToChar@@YAPBDPB_W@Z			; WideCharToChar
; Function compile flags: /Ogtpy
;	COMDAT ?WideCharToChar@@YAPBDPB_W@Z
_TEXT	SEGMENT
_wcs$ = 8						; size = 4
?WideCharToChar@@YAPBDPB_W@Z PROC			; WideCharToChar, COMDAT

; 554  : {

	push	ebx
	mov	ebx, DWORD PTR _wcs$[esp]

; 555  : 	if (!wcs)

	test	ebx, ebx
	jne	SHORT $LN1@WideCharTo

; 556  : 	{
; 557  : 		char *c = new char[2];

	cmp	DWORD PTR ?RenNew@@3P6APAXK@ZA, ebx	; RenNew
	jne	SHORT $LN4@WideCharTo
	call	?InitEngine@@YAXXZ			; InitEngine
$LN4@WideCharTo:
	push	2
	call	DWORD PTR ?RenNew@@3P6APAXK@ZA		; RenNew
	add	esp, 4

; 558  : 		c[0] = 0;

	mov	BYTE PTR [eax], 0

; 559  : 		c[1] = 0;

	mov	BYTE PTR [eax+1], 0
	pop	ebx

; 566  : }

	ret	0
$LN1@WideCharTo:

; 560  : 		return c;
; 561  : 	}
; 562  : 	int length = wcslen(wcs);

	mov	eax, ebx
	lea	edx, DWORD PTR [eax+2]
	npad	1
$LL10@WideCharTo:
	mov	cx, WORD PTR [eax]
	add	eax, 2
	test	cx, cx
	jne	SHORT $LL10@WideCharTo
	sub	eax, edx
	push	esi
	sar	eax, 1

; 563  : 	char *text = new char[length+1];

	cmp	DWORD PTR ?RenNew@@3P6APAXK@ZA, 0	; RenNew
	push	edi
	mov	esi, eax
	jne	SHORT $LN7@WideCharTo
	call	?InitEngine@@YAXXZ			; InitEngine
$LN7@WideCharTo:
	inc	esi
	push	esi
	call	DWORD PTR ?RenNew@@3P6APAXK@ZA		; RenNew

; 564  : 	wcstombs(text,wcs,length+1);

	push	esi
	mov	edi, eax
	push	ebx
	push	edi
	call	_wcstombs
	add	esp, 16					; 00000010H

; 565  : 	return text;

	mov	eax, edi
	pop	edi
	pop	esi
	pop	ebx

; 566  : }

	ret	0
?WideCharToChar@@YAPBDPB_W@Z ENDP			; WideCharToChar
END
